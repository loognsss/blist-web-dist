System.register(["./index-legacy-2c7a9ee1.js","./List-legacy-cf026c84.js","./index-legacy-8fd6e17d.js","./Password-legacy-0fb69dc4.js","./helper-legacy-01678dc3.js","./icon-legacy-92b0eefb.js","./style-legacy-1fa33b8a.js","./obj-legacy-abceba35.js","./Layout-legacy-0160c372.js","./useTitle-legacy-6aca6f53.js","./FolderTree-legacy-6e696cb2.js","./index-legacy-fd903cfc.js","./index-legacy-8d0dcee3.js","./icons-legacy-0cdf3e7b.js","./index-legacy-f4eb9a60.js"],(function(e,r){"use strict";var t,n,l,a,i,c,o,s,d,u,g,h,p,m,w,b,f,y,j,x,$,_,k,v,C,P,S,z,q,A,M,O,I,L,T,N,U,E,F,G,K,B,J,Q,R,V,X,D,H,W,Y;return{setters:[e=>{t=e.b,n=e.d,l=e.b2,a=e.e1,i=e.e2,c=e.G,o=e.q,s=e.r,d=e.y,u=e.V,g=e.N,h=e.O,p=e.K,m=e.U,w=e.a3,b=e.a4,f=e.a6,y=e.S,j=e.a9,x=e.ag,$=e.aa,_=e.L,k=e.c$,v=e.an,C=e.P,P=e.aG,S=e.au,z=e.cx,q=e.dI,A=e.am,M=e.cX,O=e.cA,I=e.aO,L=e.ap,T=e.aq,N=e.aF,U=e._,E=e.bM,F=e.e3,G=e.o,K=e.aN},e=>{B=e.L,J=e.c},e=>{Q=e.T,R=e.c},e=>{V=e.default},e=>{X=e.u},e=>{D=e.g},e=>{H=e.x,W=e.w,Y=e.b},null,null,null,null,null,null,null,null],execute:function(){const r=e=>{window.open(e,"_blank")},Z=e=>{const{show:t}=Y({id:2}),{isMouseSupported:n}=X(),l=()=>G.list_item_filename_overflow;return d(A.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.2},style:{width:"100%"},get children(){return d(v,{class:"list-item viselect-item",get"data-index"(){return e.index},w:"$full",p:"$2",rounded:"$lg",transition:"all 0.3s",get _hover(){return{transform:"scale(1.01)",bgColor:C()}},get cursor(){return n()?"default":"pointer"},"on:click":t=>{e.obj.is_dir?e.jumpCallback():e.url&&r(e.url)},onContextMenu:r=>{t(r,{props:e})},get children(){return[d(v,{class:"name-box",spacing:"$1",get w(){return J[0].w},get children(){return[d(P,{class:"icon",boxSize:"$6",get color(){return S()},get as(){return D(e.obj)},mr:"$1"}),d(j,{class:"name",get css(){return{wordBreak:"break-all",whiteSpace:"multi_line"===l()?"unset":"nowrap","overflow-x":"scrollable"===l()?"auto":"hidden",textOverflow:"ellipsis"===l()?"ellipsis":"unset","scrollbar-width":"none","&::-webkit-scrollbar":{display:"none"}}},get title(){return e.obj.name},get children(){return e.obj.name}})]}}),d(j,{class:"size",get w(){return J[1].w},get textAlign(){return J[1].textAlign},get children(){return z(e.obj.size)}}),d(j,{class:"modified",display:{"@initial":"none","@md":"inline"},get w(){return J[2].w},get textAlign(){return J[2].textAlign},get children(){return q(e.obj.modified)}})]}})}})},ee={extract:{icon:Q,color:"$success9"},copy_link:{icon:R,color:"$info9"},download:{icon:K,color:"$primary9"}},re=()=>{const{copy:e}=M(),{colorMode:t}=O();return d(W,{id:2,animation:"scale",get theme(){return"dark"!==t()?"light":"dark"},style:"z-index: var(--hope-zIndices-popover)",get children(){return[d(H,{hidden:({props:e})=>e.obj.is_dir,onClick:({props:e})=>{r(e.url)},get children(){return d(te,{name:"download"})}}),d(H,{hidden:({props:e})=>e.obj.is_dir,onClick:({props:r})=>{e(r.url)},get children(){return d(te,{name:"copy_link"})}}),d(H,{hidden:()=>{const e=I.findIndex((e=>"decompress"===e));return!L.can(T(),e)},onClick:({props:e})=>{N.emit("extract",JSON.stringify({inner:e.innerPath,pass:e.pass}))},get children(){return d(te,{name:"extract"})}})]}})},te=e=>{const r=t();return d(v,{spacing:"$2",get children(){return[d(P,{get p(){return ee[e.name].p?"$1":void 0},get as(){return ee[e.name].icon},boxSize:"$7",get color(){return ee[e.name].color}}),d(j,{get children(){return r(`home.toolbar.${e.name}`)}})]}})};e("default",(()=>{const e=t(),{pathname:r}=n(),[v,C]=l(a),[P,S]=l(i),z=c((()=>v()||P()));let q="",A="",M="",O=null;const[I,L]=o(""),[T,N]=o(!1),[G,K]=o(!1),[J,Q]=o(""),[R,X]=o([]),[D,H]=o(),[W,Y]=o(!1),[ee,te]=o(""),ne=function(){let e=!1,r=[];return{acquire:()=>new Promise((t=>{e?r.push(t):(e=!0,t())})),release:()=>{r.length>0?r.shift()():e=!1}}}(),le=e=>{let r={};return e.forEach((e=>{r[e.name]={...e,children:e.children?le(e.children):null}})),r},ae=e=>200!==e.code&&(202===e.code?E((()=>{""!==q&&N(!0),K(!0),L("")})):L(e.message),!0),ie=async e=>{if(await ne.acquire(),G()&&""===q)return ne.release(),[];if(""===A){const e=await C(r(),U(),q);if(ae(e))return ne.release(),[];if(null!==e.data.content&&(O=le(e.data.content)),A=e.data.raw_url,M=e.data.sign,Q(e.data.comment),void 0!==e.data.sort){let r;""!==e.data.sort.order_by&&(r=e.data.sort.order_by);let t="desc"===e.data.sort.order_direction,n=e.data.sort.extract_folder;E((()=>{H(r),Y(t),te(n)}))}if(e.data.encrypted&&""===q)return E((()=>{K(!0),L("")})),ne.release(),[]}if(null===O){const e=await S(r(),U(),q,"/");if(ae(e))return ne.release(),[];O=le(e.data.content)}let t=O;for(let n=0;n<e.length;n++){if(null===t[e[n]].children){const l=await S(r(),U(),q,"/"+e.slice(0,n+1).join("/"));if(ae(l))return ne.release(),[];t[e[n]].children=le(l.data.content)}t=t[e[n]].children}return E((()=>{K(!1),N(!1),L("")})),ne.release(),Object.values(t)},[ce,oe]=o([]);s((()=>{ie(R()).then((e=>oe(e)))}));const se=()=>{ie(R()).then((e=>oe(e)))};se();const de=(e,r)=>{E((()=>{te(""),H(e),void 0!==r&&Y(r)}))};return d($,{spacing:"$2",w:"$full",get children(){return[d(u,{pl:"$2",pr:"$2",w:"$full",get children(){return[d(g,{get children(){return d(h,{get currentPage(){return 0===R().length},"on:click":()=>X([]),children:"."})}}),d(p,{get each(){return R()},children:(e,r)=>d(g,{get children(){return[d(m,{}),d(h,{get currentPage(){return R().length===r()+1},"on:click":()=>X(R().slice(0,r()+1)),children:e})]}})})]}}),d(w,{get children(){return[d(b,{get when(){return""!==I()},get children(){return d(f,{get msg(){return I()},disableColor:!0})}}),d(b,{get when(){return G()},get children(){return d(V,{get title(){return e("home.toolbar.archive.input_password")},password:()=>q,setPassword:e=>q=e,enterCallback:()=>se(),get children(){return d(y,{get when(){return T()},get children(){return d(j,{color:"$danger9",get children(){return e("home.toolbar.archive.incorrect_password")}})}})}})}}),d(b,{get when(){return c((()=>!G()))()&&""===I()},get children(){return d(x,{get loading(){return z()},get children(){return d($,{class:"list",w:"$full",spacing:"$1",get children(){return[d(B,{sortCallback:de,disableCheckbox:!0}),d(p,{get each(){return(()=>{let e=ce();D()&&(e=e.sort(((e,r)=>(W()?-1:1)*F(e[D()],r[D()]))));let r=ee();if(""!==r){let t=[],n=[];e.forEach((e=>(e.is_dir?t:n).push(e))),e="front"===r?t.concat(n):n.concat(t)}return e})()},children:(e,r)=>{let t,n=(R().length>0?"/"+R().join("/"):"")+"/"+e.name;return e.is_dir||(t=A+"?inner="+_(n,!0),""!==q&&(t=t+"&pass="+encodeURIComponent(q)),""!==M&&(t=t+"&sign="+M)),d(Z,{obj:e,get index(){return r()},jumpCallback:()=>X(R().concat(e.name)),innerPath:n,url:t,pass:q})}}),d(re,{})]}})}})}})]}}),d(y,{get when(){return""!==J()},get children(){return[d(k,{}),d(j,{w:"$full",pl:"$1",pr:"$1",get children(){return J()}})]}})]}})}))}}}));
