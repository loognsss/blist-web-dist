import{cX as O,H as I,d as P,y as t,an as b,P as w,G as y,dL as h,bM as k,S as C,aT as S,aG as _,au as L,aF as v,a9 as d,cx as z,dI as K,am as T,o as D,b as W,q as j,r as B,dM as E,dN as G,aV as H,J as f,dO as p,K as F,a5 as R,aa as V}from"./index-222e4ced.js";import{b as q}from"./style-f3c4ee5c.js";import{y as J}from"./index-cc75bcf0.js";import{O as x}from"./obj-55ba4412.js";import{g as N}from"./icon-a985ffeb.js";import{I as $,u as A}from"./helper-8418b431.js";const r=[{name:"name",textAlign:"left",w:{"@initial":"76%","@md":"50%"}},{name:"size",textAlign:"right",w:{"@initial":"24%","@md":"17%"}},{name:"modified",textAlign:"right",w:{"@initial":0,"@md":"33%"}}],U=e=>{const{isHide:c}=O();if(c(e.obj))return null;const{setPathAs:s}=I(),{show:g}=q({id:1}),{pushHref:a,to:o}=P(),{openWithDoubleClick:l,toggleWithClick:i,restoreSelectionCache:u}=A(),m=()=>D.list_item_filename_overflow;return t(T.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.2},style:{width:"100%"},get children(){return t(b,{get classList(){return{selected:!!e.obj.selected}},class:"list-item viselect-item",get"data-index"(){return e.index},w:"$full",p:"$2",rounded:"$lg",transition:"all 0.3s",get _hover(){return{transform:"scale(1.01)",bgColor:w()}},as:J,get href(){return e.obj.name},get cursor(){return l()||i()?"default":"pointer"},get bgColor(){return y(()=>!!e.obj.selected)()?w():void 0},"on:dblclick":()=>{l()&&(h(e.index,!0,!0),o(a(e.obj.name)))},"on:click":n=>{if(n.preventDefault(),!l()&&!(n.ctrlKey||n.metaKey||n.shiftKey)&&u()){if(i())return h(e.index,!e.obj.selected);o(a(e.obj.name))}},onMouseEnter:()=>{s(e.obj.name,e.obj.is_dir,!0)},onContextMenu:n=>{k(()=>{h(e.index,!0,!0)}),g(n,{props:e.obj})},get children(){return[t(b,{class:"name-box",spacing:"$1",get w(){return r[0].w},get children(){return[t(C,{get when(){return S()},get children(){return t($,{"on:mousedown":n=>{n.stopPropagation()},"on:click":n=>{n.stopPropagation()},get checked(){return e.obj.selected},onChange:n=>{h(e.index,n.target.checked)}})}}),t(_,{class:"icon",boxSize:"$6",get color(){return L()},get as(){return N(e.obj)},mr:"$1",get cursor(){return e.obj.type!==x.IMAGE?"inherit":"pointer"},"on:click":n=>{e.obj.type===x.IMAGE&&(n.ctrlKey||n.metaKey||n.shiftKey||u()&&(v.emit("gallery",e.obj.name),n.preventDefault(),n.stopPropagation()))}}),t(d,{class:"name",get css(){return{wordBreak:"break-all",whiteSpace:m()==="multi_line"?"unset":"nowrap","overflow-x":m()==="scrollable"?"auto":"hidden",textOverflow:m()==="ellipsis"?"ellipsis":"unset","scrollbar-width":"none","&::-webkit-scrollbar":{display:"none"}}},get title(){return e.obj.name},get children(){return e.obj.name}})]}}),t(d,{class:"size",get w(){return r[1].w},get textAlign(){return r[1].textAlign},get children(){return z(e.obj.size)}}),t(d,{class:"modified",display:{"@initial":"none","@md":"inline"},get w(){return r[2].w},get textAlign(){return r[2].textAlign},get children(){return K(e.obj.modified)}})]}})}})},M=e=>{const c=W(),[s,g]=j(),[a,o]=j(!1);B(()=>{s()&&e.sortCallback(s(),a())});const l=i=>({fontWeight:"bold",fontSize:"$sm",color:"$neutral11",textAlign:i.textAlign,cursor:"pointer",onClick:()=>{i.name===s()?o(!a()):k(()=>{g(i.name),o(!1)})}});return t(b,{class:"title",w:"$full",p:"$2",get children(){return[t(b,{get w(){return r[0].w},spacing:"$1",get children(){return[t(C,{get when(){return y(()=>!e.disableCheckbox)()&&S()},get children(){return t($,{get checked(){return E()},get indeterminate(){return G()},onChange:i=>{H(i.target.checked)}})}}),t(d,f(()=>l(r[0]),{get children(){return c("home.obj.".concat(r[0].name))}}))]}}),t(d,f({get w(){return r[1].w}},()=>l(r[1]),{get children(){return c("home.obj.".concat(r[1].name))}})),t(d,f({get w(){return r[2].w}},()=>l(r[2]),{display:{"@initial":"none","@md":"inline"},get children(){return c("home.obj.".concat(r[2].name))}}))]}})},X=()=>{const e=a=>{var l,i;const o=Array.from((i=(l=a.dataTransfer)==null?void 0:l.items)!=null?i:[]);for(let u=0;u<o.length;u++)if(o[u].kind==="file"){v.emit("tool","upload"),a.preventDefault();break}},{isMouseSupported:c,registerSelectContainer:s,captureContentMenu:g}=A();return s(),t(V,{onDragOver:e,"oncapture:contextmenu":g,class:"list viselect-container",w:"$full",spacing:"$1",get children(){return[t(M,{sortCallback:p}),t(F,{get each(){return R.objs},children:(a,o)=>t(U,{obj:a,get index(){return o()}})})]}})},re=Object.freeze(Object.defineProperty({__proto__:null,ListTitle:M,default:X},Symbol.toStringTag,{value:"Module"}));export{M as L,re as a,r as c};
