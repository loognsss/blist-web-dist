System.register(["./index-legacy-2c7a9ee1.js"],(function(e,r){"use strict";var t,n,a,u,s,c,i,g,o,l,d,h,y,b,f,p,v,x,w,_,k;return{setters:[e=>{t=e.d,n=e.b2,a=e.bj,u=e.b,s=e.q,c=e.y,i=e.S,g=e.aa,o=e.bQ,l=e.aD,d=e.G,h=e.a9,y=e.au,b=e.I,f=e.D,p=e.ag,v=e.aq,x=e.n,w=e.bk,_=e.b5,k=e.cP}],execute:function(){e("default",(()=>{const{back:e}=t(),[r,m]=n((()=>a.post("/auth/2fa/generate"))),q=u(),[$,D]=s(),[I,S]=s("");(async()=>{if(v().otp)return x.warning(q("users.2fa_already_enabled")),void e();const r=await m();w(r,D)})();const[j,z]=n((()=>a.post("/auth/2fa/verify",{code:I(),secret:$()?.secret}))),C=async()=>{const r=await z();_(r,(()=>{k({...v(),otp:!0}),e()}))};return c(p,{get loading(){return r()},get children(){return c(i,{get when(){return $()},get children(){return c(g,{spacing:"$2",alignItems:"start",get children(){return[c(o,{get children(){return q("users.scan_qr")}}),c(l,{boxSize:"$xs",rounded:"$lg",get src(){return $()?.qr}}),c(o,{get children(){return[d((()=>q("users.or_manual"))),":"," ",c(h,{get color(){return y()},get children(){return $()?.secret}})]}}),c(b,{maxW:"$xs",get placeholder(){return q("users.input_code")},get value(){return I()},onInput:e=>S(e.currentTarget.value),onKeyDown:e=>{"Enter"===e.key&&C()}}),c(f,{get loading(){return j()},onClick:C,get children(){return q("users.verify")}})]}})}})}})}))}}}));
