System.register(["./index-legacy-2c7a9ee1.js","./index-legacy-8fd6e17d.js"],(function(e,r){"use strict";var n,t,o,l,a,u,c,g,i,h,d,s,p,f,C,w,b,m,y,k,$,v,O,S,x,F,_,I,z,P,R,j,E,H,M,B,G,T;return{setters:[e=>{n=e.aR,t=e.b,o=e.y,l=e.I,a=e.S,u=e.D,c=e.an,g=e.M,i=e.z,h=e.bn,d=e.A,s=e.B,p=e.C,f=e.E,C=e.q,w=e.af,b=e.cX,m=e.df,y=e.b2,k=e.dg,$=e._,v=e.dh,O=e.r,S=e.a0,x=e.di,F=e.au,_=e.aG,I=e.a9,z=e.P,P=e.G,R=e.i,j=e.aa,E=e.K,H=e.j,M=e.dj,B=e.bk},e=>{G=e.u,T=e.k}],execute:function(){const r=M(),X=e("F",(e=>{const[n,t]=C("/");return e.handle?.({setPath:t}),o(w,{class:"folder-tree-box",w:"$full",overflowX:"auto",get children(){return o(r.Provider,{get value(){return{value:n,onChange:r=>{t(r),e.onChange(r)},autoOpen:e.autoOpen??!1,forceRoot:e.forceRoot??!1,showEmptyIcon:e.showEmptyIcon??!1,showHiddenFolder:e.showHiddenFolder??!0}},get children(){return o(q,{path:"/"})}})}})})),q=e=>{const{isHidePath:t}=b(),[l,u]=C(),{value:g,onChange:i,forceRoot:h,autoOpen:d,showEmptyIcon:s,showHiddenFolder:p}=m(r),[f,M]=y((()=>k(e.path,$(),h)));let X=!1;const A=async()=>{if(l()?.length)return;const e=await M();B(e,(e=>{X=!0,u(e)}),(()=>{D()&&K()}))},{isOpen:D,onToggle:K}=n(),V=()=>g()===e.path,W=v(e.path);return O(S(g,(async e=>{d&&W(e)&&(D()||K(),X||A())}))),o(a,{get when(){return p||!(t(e.path)&&!W(g()))},get children(){return o(w,{get children(){return[o(c,{spacing:"$2",get children(){return[o(a,{get when(){return!f()},get fallback(){return o(x,{size:"sm",get color(){return F()}})},get children(){return o(a,{get when(){return!Boolean(s&&void 0!==l()&&!l()?.length)},get fallback(){return o(_,{get color(){return F()},as:G})},get children(){return o(_,{get color(){return F()},as:T,get transform(){return D()?"rotate(90deg)":"none"},transition:"transform 0.2s",cursor:"pointer",onClick:()=>{K(),D()&&A()}})}})}}),o(I,{css:{whiteSpace:"nowrap"},fontSize:"$md",cursor:"pointer",px:"$1",rounded:"$md",get bgColor(){return V()?"$info8":"transparent"},get _hover(){return{bgColor:V()?"$info8":z()}},onClick:()=>{i(e.path)},get children(){return P((()=>"/"===e.path))()?"root":R(e.path)}})]}}),o(a,{get when(){return D()},get children(){return o(j,{mt:"$1",pl:"$4",alignItems:"start",spacing:"$1",get children(){return o(E,{get each(){return l()},children:r=>o(q,{get path(){return H(e.path,r.name)}})})}})}})]}})}})};e("M",(e=>{const r=t(),[n,l]=C(e.defaultValue??"/"),[c,h]=C();return O((()=>{e.opened&&c()?.setPath(n())})),o(f,{size:"xl",blockScrollOnMount:!1,get opened(){return e.opened},get onClose(){return e.onClose},get children(){return[o(g,{}),o(i,{get children(){return[o(d,{w:"$full",css:{overflowWrap:"break-word"},get children(){return e.header}}),o(s,{get children(){return[P((()=>e.children)),o(X,{onChange:l,handle:e=>h(e),autoOpen:!0})]}}),o(p,{display:"flex",gap:"$2",get children(){return[o(a,{get when(){return e.footerSlot},get children(){return e.footerSlot}}),o(u,{get onClick(){return e.onClose},colorScheme:"neutral",get children(){return r("global.cancel")}}),o(u,{get loading(){return e.loading},onClick:()=>e.onSubmit?.(n()),get children(){return r("global.ok")}})]}})]}})]}})})),e("a",(e=>{const{isOpen:r,onOpen:C,onClose:w}=n(),b=t();return[o(c,{w:"$full",spacing:"$2",get children(){return[o(l,{get id(){return e.id},get value(){return e.value},onInput:r=>e.onChange(r.currentTarget.value),get readOnly(){return e.onlyFolder},get onClick(){return e.onlyFolder?C:()=>{}},get placeholder(){return b("global."+(e.onlyFolder?"choose_folder":"choose_or_input_path"))}}),o(a,{get when(){return!e.onlyFolder},get children(){return o(u,{onClick:C,get children(){return b("global.choose")}})}})]}}),o(f,{size:"xl",get opened(){return r()},onClose:w,get children(){return[o(g,{}),o(i,{get children(){return[o(h,{}),o(d,{get children(){return b("global.choose_folder")}}),o(s,{get children(){return o(X,{forceRoot:!0,get onChange(){return e.onChange}})}}),o(p,{get children(){return o(u,{onClick:w,get children(){return b("global.confirm")}})}})]}})]}})]}))}}}));
