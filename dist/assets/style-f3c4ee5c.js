import{d0 as z,dl as D,q as P,J as N,x as F,G as A,y as E,bO as Y,S as q,dm as j,cc as S,dn as k,aS as H,dp as I,dq as Q,dr as U,dj as Z,df as tt,ar as W,bM as et}from"./index-222e4ced.js";var b=(t=>(t.menu="solid-contextmenu",t.submenu="solid-contextmenu solid-contextmenu__submenu",t.submenuArrow="solid-contextmenu__submenu-arrow",t.submenuOpen="solid-contextmenu__submenu--is-open",t.separator="solid-contextmenu__separator",t.item="solid-contextmenu__item",t.itemDisabled="solid-contextmenu__item--disabled",t.itemContent="solid-contextmenu__item__content",t.theme="solid-contextmenu__theme--",t.animationWillEnter="solid-contextmenu__will-enter--",t.animationWillLeave="solid-contextmenu__will-leave--",t))(b||{});function G(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}const nt=t=>{let e,i=!0;const[o,c]=P(),[y,x]=P(),w=I(()=>t.children),m=t.name||"s";t=N({name:m,enterActiveClass:m+"-enter-active",enterClass:m+"-enter",enterToClass:m+"-enter-to",exitActiveClass:m+"-exit-active",exitClass:m+"-exit",exitToClass:m+"-exit-to"},t);const{onBeforeEnter:C,onEnter:a,onAfterEnter:u,onBeforeExit:f,onExit:$,onAfterExit:r}=t;function p(n,s){if(!i||t.appear){let l=function(v){n&&(!v||v.target===n)&&(n.removeEventListener("transitionend",l),n.removeEventListener("animationend",l),n.classList.remove(...d),n.classList.remove(...h),et(()=>{o()!==n&&c(n),y()===n&&x(void 0)}),u&&u(n),t.mode==="inout"&&_(n,s))};const g=t.enterClass.split(" "),d=t.enterActiveClass.split(" "),h=t.enterToClass.split(" ");C&&C(n),n.classList.add(...g),n.classList.add(...d),G(()=>{n.classList.remove(...g),n.classList.add(...h),a&&a(n,()=>l()),(!a||a.length<2)&&(n.addEventListener("transitionend",l),n.addEventListener("animationend",l))})}s&&!t.mode?x(n):c(n)}function _(n,s){const l=t.exitClass.split(" "),g=t.exitActiveClass.split(" "),d=t.exitToClass.split(" ");if(!s.parentNode)return h();f&&f(s),s.classList.add(...l),s.classList.add(...g),G(()=>{s.classList.remove(...l),s.classList.add(...d)}),$&&$(s,()=>h()),(!$||$.length<2)&&(s.addEventListener("transitionend",h),s.addEventListener("animationend",h));function h(v){(!v||v.target===s)&&(s.removeEventListener("transitionend",h),s.removeEventListener("animationend",h),s.classList.remove(...g),s.classList.remove(...d),o()===s&&c(void 0),r&&r(s),t.mode==="outin"&&p(n,s))}}return Q(n=>{for(e=w();typeof e=="function";)e=e();return U(()=>(e&&e!==n&&(t.mode!=="outin"?p(e,n):i&&c(e)),n&&n!==e&&t.mode!=="inout"&&_(e,n),i=!1,e))}),[o,y]};function it(t){return{all:t=t||new Map,on:function(e,i){var o=t.get(e);o?o.push(i):t.set(e,[i])},off:function(e,i){var o=t.get(e);o&&(i?o.splice(o.indexOf(i)>>>0,1):t.set(e,[]))},emit:function(e,i){var o=t.get(e);o&&o.slice().map(function(c){c(i)}),(o=t.get("*"))&&o.slice().map(function(c){c(e,i)})}}}const L=it(),K=Z(),V=()=>tt(K);function X(t){var e,i,o="";if(typeof t=="string"||typeof t=="number")o+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(i=X(t[e]))&&(o&&(o+=" "),o+=i);else for(e in t)t[e]&&(o&&(o+=" "),o+=e);return o}function M(){for(var t,e,i=0,o="";i<arguments.length;)(t=arguments[i++])&&(e=X(t))&&(o&&(o+=" "),o+=e);return o}const ot=W("<div></div>",2),J=(t,e,i)=>t+e<=i?t:t<e?i-e:t-e,st=(t,e)=>{const i={width:window.innerWidth,height:window.innerHeight};return{x:J(t.x,e.width,i.width),y:J(t.y,e.height,i.height)}},ht=t=>{const[e,i]=D(t,["id","theme","animation","onShown","onHidden"]),[o,c]=P(!1),[y,x]=P({x:0,y:0});let w;const[m,C]=P();L.on("show",r=>{var p;r.id===e.id&&(r.event.preventDefault(),C(r.props),c(!0),x((p=r.position)!=null?p:st({x:r.event.clientX,y:r.event.clientY},{width:w.offsetWidth,height:w.offsetHeight})))});const a=()=>{L.emit("hide",e.id),c(!1)},u=N({shown:o,animation:"scale",hide:a,props:m},e);L.on("hideAll",()=>{a()}),F(()=>{L.off("show"),L.off("hideAll")});const f=A(()=>{let r="";return e.animation&&(r="solid-contextmenu-".concat(e.animation)),console.log(r),r}),$=A(()=>({enterActiveClass:f()+"-enter-active",exitActiveClass:f()+"-exit-active"}));return E(K.Provider,{value:u,get children(){return E(Y,{get children(){return E(nt,N($,{get children(){return E(q,{get when(){return o()},get children(){const r=ot.cloneNode(!0),p=w;return typeof p=="function"?p(r):w=r,rt(r,()=>a()),j(r,i,!1,!1),S(_=>{const n=M(b.menu,i.class,{["".concat(b.theme).concat(e.theme)]:e.theme}),s=y().x+"px",l=y().y+"px";return n!==_._v$&&k(r,_._v$=n),s!==_._v$2&&r.style.setProperty("left",_._v$2=s),l!==_._v$3&&r.style.setProperty("top",_._v$3=l),_},{_v$:void 0,_v$2:void 0,_v$3:void 0}),r}})}}))}})}})};function rt(t,e){const i=o=>{var c;return!t.contains(o.target)&&((c=e())==null?void 0:c())};document.body.addEventListener("click",i),F(()=>document.body.removeEventListener("click",i))}function dt(t){return typeof t=="function"}function T(t,e){return dt(t)?t(e):t}const at=W("<div><div></div></div>",4),ut=t=>{const[e,i]=D(t,["hidden","disabled","onClick","data","children"]),o=N({hidden:!1,disabled:!1},e),{props:c,hide:y}=V(),x=A(()=>({props:c(),data:t.data})),w=A(()=>T(o.disabled,x())),m=A(()=>T(o.hidden,x())),C=a=>{var u;w()||((u=t.onClick)==null||u.call(t,{event:a,...x()}),y())};return E(q,{get when(){return!m()},get children(){const a=at.cloneNode(!0),u=a.firstChild;return a.$$click=C,j(a,i,!1,!0),H(u,()=>e.children),S(f=>{const $=M(b.item,{[b.itemDisabled]:w()}),r=b.itemContent;return $!==f._v$&&k(a,f._v$=$),r!==f._v$2&&k(u,f._v$2=r),f},{_v$:void 0,_v$2:void 0}),a}})};z(["click"]);const lt=W("<div></div>",2),ct=W("<div><div><span></span></div></div>",6),mt=t=>{const[e,i]=D(t,["arrow","children","disabled","hidden","label","class"]),o=N({arrow:"▶️",disabled:!1,hidden:!1},e),{props:c,id:y}=V(),x=A(()=>({props:c()})),w=A(()=>T(o.disabled,x())),m=A(()=>T(o.hidden,x()));let C,a;const[u,f]=P({x:0,y:0}),$=()=>{const n=C.getBoundingClientRect(),s=a.getBoundingClientRect(),l={width:window.innerWidth,height:window.innerHeight};let g=n.right;g+s.width>l.width&&(n.left-s.width>0?g=n.left-s.width:g=l.width-s.width);let d=n.top;d+s.height>l.height&&(n.bottom-s.height>0?d=n.bottom-s.height:d=l.height-s.height),f({x:g,y:d}),console.log(u())},[r,p]=P(!1),_=()=>{p(!0),$()};return L.on("hide",n=>{n===y&&p(!1)}),F(()=>{L.off("hide")}),E(q,{get when(){return!m()},get children(){const n=ct.cloneNode(!0),s=n.firstChild,l=s.firstChild;n.$$click=()=>r()?p(!1):_(),n.addEventListener("mouseleave",()=>p(!1)),n.addEventListener("mouseenter",()=>_()),j(n,i,!1,!0);const g=C;return typeof g=="function"?g(s):C=s,H(s,()=>o.label,l),H(l,()=>o.arrow),H(n,E(q,{get when(){return r()},get children(){const d=lt.cloneNode(!0),h=a;return typeof h=="function"?h(d):a=d,H(d,()=>o.children),S(v=>{const B=b.submenu,O=u().x+"px",R=u().y+"px";return B!==v._v$&&k(d,v._v$=B),O!==v._v$2&&d.style.setProperty("left",v._v$2=O),R!==v._v$3&&d.style.setProperty("top",v._v$3=R),v},{_v$:void 0,_v$2:void 0,_v$3:void 0}),d}}),null),S(d=>{const h=M(b.item,e.class,{[b.itemDisabled]:w()}),v=b.itemContent,B=b.submenuArrow;return h!==d._v$4&&k(n,d._v$4=h),v!==d._v$5&&k(s,d._v$5=v),B!==d._v$6&&k(l,d._v$6=B),d},{_v$4:void 0,_v$5:void 0,_v$6:void 0}),n}})};z(["click"]);const ft=t=>({show:(e,i)=>{L.emit("show",{id:(i==null?void 0:i.id)||(t==null?void 0:t.id),props:(i==null?void 0:i.props)||(t==null?void 0:t.props),event:e,position:i==null?void 0:i.position})},hideAll:()=>{L.emit("hideAll")}});export{mt as C,ft as b,ht as w,ut as x};
